# 五、多github账户配置SSH公钥

## 5.1 生成不同SHH

```sh
# 进入ssh位置
cd C:\Users\<yourname>\.ssh

# github密钥1
ssh-keygen -t rsa -b 4096 -C "github1@example.com" -f id_rsa_github1

# github密钥2
ssh-keygen -t rsa -b 4096 -C "github2@example.com" -f id_rsa_github2

# gitlab
ssh-keygen -t rsa -b 4096 -C "gitlab@email.com"- f id_rsa_gitlab
```

## 5.2 将公钥添加到对应平台


1. 复制公钥内容

    ```sh
    # 查看 GitHub1 公钥
    cat id_rsa_github1.pub

    # 查看 GitHub2 公钥
    cat id_ed25519_github2.pub

    # 查看 GitLab 公钥
    cat id_rsa_gitlab.pub
    ```

2. 添加到对应平台
    - GitHub：
        1. 登录 GitHub 账户
        2. Settings → SSH and GPG keys → New SSH key
        3. 粘贴对应的公钥内容
        4. Title 可以命名为：My Computer - GitHub1 等
    - GitLab：
        1. 登录 GitLab
        2. 点击右上角头像 → Preferences → SSH Keys
        3. 粘贴 GitLab 公钥内容
        4. Title 可以命名为：My Computer - GitLab

## 5.3 配置 SSH Config 文件

```ini
# ===========github 项目==============
Host github.com-project
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_github1  # 注意：这里使用半角波浪线 ~
    IdentitiesOnly yes

# ============ github学习 =============
Host github.com-study
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_github2  # 这里也是半角 ~
    IdentitiesOnly yes

# ========= github旧版本使用=============
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa
    IdentitiesOnly yes

# GitLab 本地仓库
Host local-gitlab
    HostName 192.168.18.81
    User git
    IdentityFile ~/.ssh/id_rsa_gitlab
    IdentitiesOnly yes

# ========== 默认配置（可选） ==========
Host *
    AddKeysToAgent yes
    ServerAliveInterval 60
    ServerAliveCountMax 3
#   UseKeychain yes  # macOS 专用，保存密码到钥匙串
```

## 5.4 测试 SSH 连接

```sh
# 测试 github.com-project
ssh -T git@github.com-project

# 测试 github
ssh -T git@github.com

# 测试 GitLab
ssh -T git@local-gitlab
```

![](/other/install/cloudflare/005.png)

## 5.5 使用不同账户克隆仓库

1. 克隆示例：

    ```sh
    # github显示的SSH 
    git clone git@github.com:username1/repo1.git 

    # 使用 GitHub 账户 1 克隆
    git clone git@github.com-github1:username1/repo1.git

    # 使用 GitHub 账户 2 克隆
    git clone git@github.com-github2:username2/repo2.git

    # 使用 GitLab 克隆
    git clone git@local-gitlab:username/repo.git
    ```

2. 修改现有仓库的远程地址：

    ```sh
    # 查看当前远程地址
    git remote -v

    # 修改为对应账户的地址格式
    git remote set-url origin git@github.com-github1:username/repo.git
    # 或
    git remote set-url origin git@local-gitlab:username/repo.git
    ```

# Webä¸­URLå¤„ç†å®Œå…¨æŒ‡å—

## ä¸€ã€URLåŸºç¡€ç»“æ„

### URLæ ‡å‡†æ ¼å¼ (RFC 3986)

```text
  https://username:password@www.example.com:8080/path/to/file?query=value&key=value#fragment
  \___/   \_________________/ \_____________/ \__/\___________/ \_____________/ \________/
    |            |                 |           |       |              |             |
  åè®®    è®¤è¯ä¿¡æ¯(å¯é€‰)         ä¸»æœºå       ç«¯å£    è·¯å¾„          æŸ¥è¯¢å‚æ•°      ç‰‡æ®µæ ‡è¯†
  
  å®Œæ•´ç¤ºä¾‹åˆ†è§£ï¼š
  scheme://[userinfo@]host[:port][/path][?query][#fragment]
```

### URLå„ç»„ä»¶è¯¦è§£

| ç»„ä»¶  | è¯´æ˜  | ç¤ºä¾‹  | å¿…å¡«  |
| --- | --- | --- | --- |
| **åè®® (Scheme)** | ä½¿ç”¨çš„åè®® | `http`, `https`, `ftp`, `mailto` | æ˜¯   |
| **è®¤è¯ä¿¡æ¯** | ç”¨æˆ·åå’Œå¯†ç  | `username:password@` | å¦   |
| **ä¸»æœºå (Host)** | åŸŸåæˆ–IPåœ°å€ | `www.example.com`, `127.0.0.1` | æ˜¯   |
| **ç«¯å£ (Port)** | ç«¯å£å· | `:80`, `:443`, `:8080` | å¦(æœ‰é»˜è®¤å€¼) |
| **è·¯å¾„ (Path)** | èµ„æºè·¯å¾„ | `/api/users`, `/index.html` | å¦   |
| **æŸ¥è¯¢å‚æ•° (Query)** | URLå‚æ•° | `?page=1&sort=name` | å¦   |
| **ç‰‡æ®µ (Fragment)** | é¡µé¢å†…é”šç‚¹ | `#section1`, `#top` | å¦   |

### å¸¸è§åè®®é»˜è®¤ç«¯å£

| åè®®  | é»˜è®¤ç«¯å£ | è¯´æ˜  |
| --- | --- | --- |
| HTTP | 80  | è¶…æ–‡æœ¬ä¼ è¾“åè®® |
| HTTPS | 443 | å®‰å…¨HTTP |
| FTP | 21  | æ–‡ä»¶ä¼ è¾“åè®® |
| SSH | 22  | å®‰å…¨Shell |
| SMTP | 25  | é‚®ä»¶å‘é€ |
| IMAP | 143 | é‚®ä»¶æ¥æ”¶ |
| MySQL | 3306 | æ•°æ®åº“ |
| PostgreSQL | 5432 | æ•°æ®åº“ |
| Redis | 6379 | ç¼“å­˜  |
| MongoDB | 27017 | æ•°æ®åº“ |

## äºŒã€URLç¼–ç ä¸è§£ç 

### 1. **ç¼–ç /è§£ç æ–¹æ³•å¯¹æ¯”**

| æ–¹æ³•  | ç¼–ç å†…å®¹ | ä¸ç¼–ç å†…å®¹ | ç”¨é€”  |
| --- | --- | --- | --- |
| `encodeURI()` | é™¤åŠŸèƒ½å­—ç¬¦å¤–çš„æ‰€æœ‰éæ³•å­—ç¬¦ | `A-Z a-z 0-9 ; , / ? : @ & = + $ - _ . ! ~ * ' ( ) #` | ç¼–ç å®Œæ•´URL |
| `decodeURI()` | å¯¹åº”è§£ç  | \-  | è§£ç å®Œæ•´URL |
| `encodeURIComponent()` | é™¤å­—æ¯æ•°å­—å¤–çš„æ‰€æœ‰å­—ç¬¦ | `A-Z a-z 0-9 - _ . ! ~ * ' ( )` | ç¼–ç URLç»„ä»¶ |
| `decodeURIComponent()` | å¯¹åº”è§£ç  | \-  | è§£ç URLç»„ä»¶ |
| `escape()` (å·²åºŸå¼ƒ) | ASCIIå­—ç¬¦å¤–æ‰€æœ‰å­—ç¬¦ | `* @ - _ + . /` | é¿å…ä½¿ç”¨ |
| `unescape()` (å·²åºŸå¼ƒ) | å¯¹åº”è§£ç  | \-  | é¿å…ä½¿ç”¨ |

### 2. **æ­£ç¡®ä½¿ç”¨ç¤ºä¾‹**



```javascript
// ç¼–ç å®Œæ•´URLï¼ˆä¿ç•™ç‰¹æ®Šå­—ç¬¦ï¼‰
const url = 'https://example.com/path?name=John Doe&city=New York';
const encodedUrl = encodeURI(url);
// "https://example.com/path?name=John%20Doe&city=New%20York"

// ç¼–ç URLç»„ä»¶ï¼ˆç”¨äºæŸ¥è¯¢å‚æ•°å€¼ï¼‰
const paramValue = 'John Doe & Sons';
const encodedParam = encodeURIComponent(paramValue);
// "John%20Doe%20%26%20Sons"

// æ„å»ºå¸¦å‚æ•°çš„URL
function buildUrl(base, params) {
    const url = new URL(base);
    Object.entries(params).forEach(([key, value]) => {
        url.searchParams.append(key, value);
    });
    return url.toString();
}

// Base64ç¼–ç ï¼ˆç”¨äºç‰¹æ®Šåœºæ™¯ï¼‰
const base64Encoded = btoa('username:password');  // "dXNlcm5hbWU6cGFzc3dvcmQ="
const base64Decoded = atob('dXNlcm5hbWU6cGFzc3dvcmQ=');  // "username:password"
```

### 3. **å¤„ç†ä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦**


```javascript
// ä¸­æ–‡URLå¤„ç†
const chineseUrl = 'https://example.com/æœç´¢?å…³é”®è¯=æ­£åˆ™è¡¨è¾¾å¼';
const encoded = encodeURI(chineseUrl);
// "https://example.com/%E6%90%9C%E7%B4%A2?%E5%85%B3%E9%94%AE%E8%AF%8D=%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"

// ç°ä»£æµè§ˆå™¨è‡ªåŠ¨å¤„ç†
const url = new URL('https://example.com/æœç´¢');
console.log(url.pathname);  // "/%E6%90%9C%E7%B4%A2"
console.log(decodeURIComponent(url.pathname));  // "/æœç´¢"

// å¤„ç†Emoji
const emojiUrl = 'https://example.com/ğŸ˜€/page';
const safeUrl = encodeURI(emojiUrl);
// "https://example.com/%F0%9F%98%80/page"
```

import{_ as a,c as n,o as t,a0 as i}from"./chunks/framework.zS86-xgI.js";const k=JSON.parse('{"title":"Cron表达式完全指南","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/other/expression/cron/01.md","filePath":"markdown/other/expression/cron/01.md"}'),p={name:"markdown/other/expression/cron/01.md"};function l(e,s,d,r,h,o){return t(),n("div",null,s[0]||(s[0]=[i(`<h1 id="cron表达式完全指南" tabindex="-1">Cron表达式完全指南 <a class="header-anchor" href="#cron表达式完全指南" aria-label="Permalink to &quot;Cron表达式完全指南&quot;">​</a></h1><h2 id="一、cron表达式格式" tabindex="-1">一、Cron表达式格式 <a class="header-anchor" href="#一、cron表达式格式" aria-label="Permalink to &quot;一、Cron表达式格式&quot;">​</a></h2><p>Cron表达式有两种主要格式：</p><h3 id="_1-标准unix-linux-cron-5位" tabindex="-1">1. <strong>标准Unix/Linux Cron（5位）</strong> <a class="header-anchor" href="#_1-标准unix-linux-cron-5位" aria-label="Permalink to &quot;1. **标准Unix/Linux Cron（5位）**&quot;">​</a></h3><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{分钟} {小时} {日期} {月份} {星期}</span></span>
<span class="line"><span>*    *    *    *    *</span></span>
<span class="line"><span>│    │    │    │    │</span></span>
<span class="line"><span>│    │    │    │    └── 星期 (0-7, 0和7都代表周日)</span></span>
<span class="line"><span>│    │    │    └─────── 月份 (1-12)</span></span>
<span class="line"><span>│    │    └─────────── 日期 (1-31)</span></span>
<span class="line"><span>│    └──────────────── 小时 (0-23)</span></span>
<span class="line"><span>└───────────────────── 分钟 (0-59)</span></span></code></pre></div><h3 id="_2-扩展cron-quartz-cron-6-7位" tabindex="-1">2. <strong>扩展Cron/Quartz Cron（6-7位）</strong> <a class="header-anchor" href="#_2-扩展cron-quartz-cron-6-7位" aria-label="Permalink to &quot;2. **扩展Cron/Quartz Cron（6-7位）**&quot;">​</a></h3><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{秒} {分钟} {小时} {日期} {月份} {星期} {年份(可选)}</span></span>
<span class="line"><span>*  *    *    *    *    *    *</span></span>
<span class="line"><span>│  │    │    │    │    │    │</span></span>
<span class="line"><span>│  │    │    │    │    │    └── 年份 (1970-2099, 可选)</span></span>
<span class="line"><span>│  │    │    │    │    └─────── 星期 (1-7或SUN-SAT, 1=周日)</span></span>
<span class="line"><span>│  │    │    │    └─────────── 月份 (1-12或JAN-DEC)</span></span>
<span class="line"><span>│  │    │    └──────────────── 日期 (1-31)</span></span>
<span class="line"><span>│  │    └───────────────────── 小时 (0-23)</span></span>
<span class="line"><span>│  └─────────────────────────── 分钟 (0-59)</span></span>
<span class="line"><span>└────────────────────────────── 秒 (0-59)</span></span></code></pre></div><h2 id="二、字段允许值详解" tabindex="-1">二、字段允许值详解 <a class="header-anchor" href="#二、字段允许值详解" aria-label="Permalink to &quot;二、字段允许值详解&quot;">​</a></h2><table tabindex="0"><thead><tr><th>字段</th><th>必填</th><th>允许值</th><th>允许的特殊字符</th><th>说明</th></tr></thead><tbody><tr><td>秒</td><td>是</td><td>0-59</td><td><code>, - * /</code></td><td>Quartz特有</td></tr><tr><td>分钟</td><td>是</td><td>0-59</td><td><code>, - * /</code></td><td></td></tr><tr><td>小时</td><td>是</td><td>0-23</td><td><code>, - * /</code></td><td>24小时制</td></tr><tr><td>日期</td><td>是</td><td>1-31</td><td><code>, - * ? / L W C</code></td><td>注意大小月</td></tr><tr><td>月份</td><td>是</td><td>1-12 或 JAN-DEC</td><td><code>, - * /</code></td><td></td></tr><tr><td>星期</td><td>是</td><td>1-7 或 SUN-SAT</td><td><code>, - * ? / L C #</code></td><td><strong>1=周日</strong></td></tr><tr><td>年份</td><td>否</td><td>1970-2099</td><td><code>, - * /</code></td><td>Quartz特有</td></tr></tbody></table><h2 id="三、特殊字符完全解析" tabindex="-1">三、特殊字符完全解析 <a class="header-anchor" href="#三、特殊字符完全解析" aria-label="Permalink to &quot;三、特殊字符完全解析&quot;">​</a></h2><h3 id="基本字符" tabindex="-1"><strong>基本字符</strong> <a class="header-anchor" href="#基本字符" aria-label="Permalink to &quot;**基本字符**&quot;">​</a></h3><ul><li><p><code>*</code> 所有值：表示字段的每个可能值</p></li><li><p><code>?</code> 无指定值：用于日期和星期字段互斥</p></li><li><p><code>-</code> 范围：<code>10-12</code> 表示10,11,12</p></li><li><p><code>,</code> 列表：<code>1,3,5</code> 表示1或3或5</p></li><li><p><code>/</code> 步长：<code>0/15</code> 从0开始每15单位</p></li></ul><h3 id="高级字符-quartz特有" tabindex="-1"><strong>高级字符（Quartz特有）</strong> <a class="header-anchor" href="#高级字符-quartz特有" aria-label="Permalink to &quot;**高级字符（Quartz特有）**&quot;">​</a></h3><h4 id="l-last-最后" tabindex="-1"><strong>L (Last) - 最后</strong> <a class="header-anchor" href="#l-last-最后" aria-label="Permalink to &quot;**L (Last) - 最后**&quot;">​</a></h4><ul><li><p><strong>日期字段</strong>：<code>L</code> 表示当月最后一天</p></li><li><p><strong>星期字段</strong>：<code>L</code> 表示周六，或与数字组合：<code>6L</code> 表示最后一个周五</p></li><li><p><strong>组合用法</strong>：</p><ul><li><p><code>L-3</code>：倒数第3天（日期字段）</p></li><li><p><code>FRIL</code>：最后一个周五（星期字段）</p></li></ul></li></ul><h4 id="w-weekday-工作日" tabindex="-1"><strong>W (Weekday) - 工作日</strong> <a class="header-anchor" href="#w-weekday-工作日" aria-label="Permalink to &quot;**W (Weekday) - 工作日**&quot;">​</a></h4><ul><li><p><strong>仅用于日期字段</strong></p></li><li><p><code>15W</code>：最接近15号的工作日</p><ul><li><p>15号周一→15号执行</p></li><li><p>15号周六→14号周五执行</p></li><li><p>15号周日→16号周一执行</p></li></ul></li><li><p><strong>限制</strong>：</p><ul><li><p>不能用于范围或列表</p></li><li><p><code>1W</code>：如果1号是周六，则在上月最后一个工作日执行</p></li><li><p><code>LW</code>：本月最后一个工作日</p></li></ul></li></ul><h4 id="第n个星期几" tabindex="-1"><strong># (第N个星期几)</strong> <a class="header-anchor" href="#第n个星期几" aria-label="Permalink to &quot;**\\# (第N个星期几)**&quot;">​</a></h4><ul><li><p><strong>仅用于星期字段</strong></p></li><li><p><code>6#3</code>：每月的第3个周五</p></li><li><p><code>2#1</code>：每月的第1个周一</p></li><li><p>如果指定的周数不存在（如<code>6#6</code>），则不触发</p></li></ul><h4 id="c-calendar-日历相关" tabindex="-1"><strong>C (Calendar) - 日历相关</strong> <a class="header-anchor" href="#c-calendar-日历相关" aria-label="Permalink to &quot;**C (Calendar) - 日历相关**&quot;">​</a></h4><ul><li><p><strong>日期字段</strong>：<code>5C</code> = 5号之后（含5号）的第一个日历日</p></li><li><p><strong>星期字段</strong>：<code>1C</code> = 周日之后（含周日）的第一个日历日</p></li><li><p>实际使用较少，多数场景可用其他方式替代</p></li></ul><h2 id="四、重要规则和冲突处理" tabindex="-1">四、重要规则和冲突处理 <a class="header-anchor" href="#四、重要规则和冲突处理" aria-label="Permalink to &quot;四、重要规则和冲突处理&quot;">​</a></h2><h3 id="_1-日期与星期的互斥性" tabindex="-1">1. <strong>日期与星期的互斥性</strong> <a class="header-anchor" href="#_1-日期与星期的互斥性" aria-label="Permalink to &quot;1. **日期与星期的互斥性**&quot;">​</a></h3><ul><li><p>日期和星期字段<strong>不能同时指定具体值</strong></p></li><li><p>必须有一个使用<code>?</code></p></li><li><p><strong>正确</strong>：<code>0 0 12 10 * ?</code>（每月10号12点）</p></li><li><p><strong>正确</strong>：<code>0 0 12 ? * MON</code>（每周一12点）</p></li><li><p><strong>错误</strong>：<code>0 0 12 10 * MON</code>（冲突）</p></li></ul><h3 id="_2-字段优先级" tabindex="-1">2. <strong>字段优先级</strong> <a class="header-anchor" href="#_2-字段优先级" aria-label="Permalink to &quot;2. **字段优先级**&quot;">​</a></h3><p>当日期规则冲突时：</p><ol><li><p>星期规则优先于日期规则（如果有具体星期值）</p></li><li><p><code>L</code>（最后一天）具有最高优先级</p></li><li><p><code>W</code>（工作日）会调整到最近的工作日</p></li></ol><h3 id="_3-月份天数处理" tabindex="-1">3. <strong>月份天数处理</strong> <a class="header-anchor" href="#_3-月份天数处理" aria-label="Permalink to &quot;3. **月份天数处理**&quot;">​</a></h3><p>Cron能智能处理不同月份的天数：</p><ul><li><p><code>0 0 L * ?</code>：每月最后一天执行，2月28/29日，4月30日等</p></li><li><p><code>0 0 31 * ?</code>：只在有31天的月份执行</p></li></ul><h2 id="五、实用案例大全" tabindex="-1">五、实用案例大全 <a class="header-anchor" href="#五、实用案例大全" aria-label="Permalink to &quot;五、实用案例大全&quot;">​</a></h2><h3 id="基础定时" tabindex="-1"><strong>基础定时</strong> <a class="header-anchor" href="#基础定时" aria-label="Permalink to &quot;**基础定时**&quot;">​</a></h3><div class="language-cron vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cron</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 每5秒执行一次（Quartz）</span></span>
<span class="line"><span>*/5 * * * * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每小时的第30分钟执行</span></span>
<span class="line"><span>0 30 * * * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每天凌晨2点执行</span></span>
<span class="line"><span>0 0 2 * * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每周一上午9点</span></span>
<span class="line"><span>0 0 9 ? * MON</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每月1号凌晨1点</span></span>
<span class="line"><span>0 0 1 1 * ?</span></span></code></pre></div><h3 id="工作日调度" tabindex="-1"><strong>工作日调度</strong> <a class="header-anchor" href="#工作日调度" aria-label="Permalink to &quot;**工作日调度**&quot;">​</a></h3><div class="language-cron vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cron</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 工作日（周一到周五）上午10:15</span></span>
<span class="line"><span>0 15 10 ? * MON-FRI</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 工作日上午9点到下午6点，每2小时执行</span></span>
<span class="line"><span>0 0 9-18/2 ? * MON-FRI</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每月最后一个工作日17:30</span></span>
<span class="line"><span>0 30 17 LW * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每月10号最近的工作日（如10号是周六则在9号执行）</span></span>
<span class="line"><span>0 0 0 10W * ?</span></span></code></pre></div><h3 id="复杂业务场景" tabindex="-1"><strong>复杂业务场景</strong> <a class="header-anchor" href="#复杂业务场景" aria-label="Permalink to &quot;**复杂业务场景**&quot;">​</a></h3><div class="language-cron vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cron</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 季度报表：每季度第一个月1号</span></span>
<span class="line"><span>0 0 0 1 1,4,7,10 ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 发薪日：每月15号，如果是周末则提前到周五</span></span>
<span class="line"><span>0 0 0 15W * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 年度审计：每年12月最后一个工作日</span></span>
<span class="line"><span>0 0 0 LW DEC ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 月末结算：每月最后一天23:30</span></span>
<span class="line"><span>0 30 23 L * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每周备份：周六凌晨2点</span></span>
<span class="line"><span>0 0 2 ? * SAT</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每日高峰期监控：工作日的9-18点，每15分钟</span></span>
<span class="line"><span>0 0/15 9-18 ? * MON-FRI</span></span></code></pre></div><h3 id="特殊时间点" tabindex="-1"><strong>特殊时间点</strong> <a class="header-anchor" href="#特殊时间点" aria-label="Permalink to &quot;**特殊时间点**&quot;">​</a></h3><div class="language-cron vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cron</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 每15分钟执行一次</span></span>
<span class="line"><span>0 */15 * * * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每小时的0分和30分执行</span></span>
<span class="line"><span>0 0,30 * * * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每天9:00-17:30，每半小时</span></span>
<span class="line"><span>0 0/30 9-17 * * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每月第一个和第三个周一</span></span>
<span class="line"><span>0 0 10 ? * 2#1,2#3</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 每年6月和12月的最后一个周五</span></span>
<span class="line"><span>0 0 10 ? JUN,DEC FRI#-1</span></span></code></pre></div><h2 id="六、月份和星期缩写对照表" tabindex="-1">六、月份和星期缩写对照表 <a class="header-anchor" href="#六、月份和星期缩写对照表" aria-label="Permalink to &quot;六、月份和星期缩写对照表&quot;">​</a></h2><h3 id="月份缩写" tabindex="-1"><strong>月份缩写</strong> <a class="header-anchor" href="#月份缩写" aria-label="Permalink to &quot;**月份缩写**&quot;">​</a></h3><table tabindex="0"><thead><tr><th>全称</th><th>缩写</th><th>数字</th><th>全称</th><th>缩写</th><th>数字</th></tr></thead><tbody><tr><td>January</td><td>JAN</td><td>1</td><td>July</td><td>JUL</td><td>7</td></tr><tr><td>February</td><td>FEB</td><td>2</td><td>August</td><td>AUG</td><td>8</td></tr><tr><td>March</td><td>MAR</td><td>3</td><td>September</td><td>SEP</td><td>9</td></tr><tr><td>April</td><td>APR</td><td>4</td><td>October</td><td>OCT</td><td>10</td></tr><tr><td>May</td><td>MAY</td><td>5</td><td>November</td><td>NOV</td><td>11</td></tr><tr><td>June</td><td>JUN</td><td>6</td><td>December</td><td>DEC</td><td>12</td></tr></tbody></table><h3 id="星期缩写" tabindex="-1"><strong>星期缩写</strong> <a class="header-anchor" href="#星期缩写" aria-label="Permalink to &quot;**星期缩写**&quot;">​</a></h3><table tabindex="0"><thead><tr><th>全称</th><th>缩写</th><th>数字（标准）</th><th>数字（Quartz）</th></tr></thead><tbody><tr><td>Sunday</td><td>SUN</td><td>0</td><td>1</td></tr><tr><td>Monday</td><td>MON</td><td>1</td><td>2</td></tr><tr><td>Tuesday</td><td>TUE</td><td>2</td><td>3</td></tr><tr><td>Wednesday</td><td>WED</td><td>3</td><td>4</td></tr><tr><td>Thursday</td><td>THU</td><td>4</td><td>5</td></tr><tr><td>Friday</td><td>FRI</td><td>5</td><td>6</td></tr><tr><td>Saturday</td><td>SAT</td><td>6</td><td>7</td></tr></tbody></table><p><strong>注意</strong>：Quartz中星期日=1，星期六=7；标准Cron中星期日=0，星期六=6。</p><h2 id="七、验证和调试技巧" tabindex="-1">七、验证和调试技巧 <a class="header-anchor" href="#七、验证和调试技巧" aria-label="Permalink to &quot;七、验证和调试技巧&quot;">​</a></h2><h3 id="_1-在线验证工具" tabindex="-1">1. <strong>在线验证工具</strong> <a class="header-anchor" href="#_1-在线验证工具" aria-label="Permalink to &quot;1. **在线验证工具**&quot;">​</a></h3><ul><li><p><a href="https://crontab.guru/" target="_blank" rel="noreferrer">Crontab Guru</a> - 标准5位Cron</p></li><li><p><a href="https://www.freeformatter.com/cron-expression-generator-quartz.html" target="_blank" rel="noreferrer">FreeFormatter Cron</a> - Quartz Cron</p></li><li><p><a href="https://www.bejson.com/othertools/cron/" target="_blank" rel="noreferrer">Cron表达式生成器</a> - 中文界面</p></li></ul><h3 id="_2-常见错误排查" tabindex="-1">2. <strong>常见错误排查</strong> <a class="header-anchor" href="#_2-常见错误排查" aria-label="Permalink to &quot;2. **常见错误排查**&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 错误：月份使用0-11（应该是1-12）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # ❌ 错误，0不是有效月份</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # ✅ 正确，1月</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 错误：日期和星期都指定具体值</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MON</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ❌ 冲突</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ✅ 每月10号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MON</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # ✅ 每周一</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 错误：超出范围的值</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 61</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # ❌ 分钟最大59</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # ❌ 小时最大23</span></span></code></pre></div><h3 id="_3-测试表达式" tabindex="-1">3. <strong>测试表达式</strong> <a class="header-anchor" href="#_3-测试表达式" aria-label="Permalink to &quot;3. **测试表达式**&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux下测试标准Cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crontab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 查看当前任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crontab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 编辑任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crond</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 查看服务状态</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 打印下一次执行时间（Python示例）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> croniter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> datetime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> datetime</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cron</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> croniter.croniter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;0 0 * * *&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> datetime.now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next_time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cron.get_next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">f</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;下次执行时间: {next_time}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="八、平台差异和注意事项" tabindex="-1">八、平台差异和注意事项 <a class="header-anchor" href="#八、平台差异和注意事项" aria-label="Permalink to &quot;八、平台差异和注意事项&quot;">​</a></h2><h3 id="不同系统的差异" tabindex="-1"><strong>不同系统的差异</strong> <a class="header-anchor" href="#不同系统的差异" aria-label="Permalink to &quot;**不同系统的差异**&quot;">​</a></h3><table tabindex="0"><thead><tr><th>特性</th><th>Linux Crontab</th><th>Spring @Scheduled</th><th>Quartz Scheduler</th></tr></thead><tbody><tr><td>字段数</td><td>5</td><td>6</td><td>6-7</td></tr><tr><td>秒字段</td><td>不支持</td><td>支持</td><td>支持</td></tr><tr><td>年份字段</td><td>不支持</td><td>不支持</td><td>支持</td></tr><tr><td>星期表示</td><td>0-6 (0=周日)</td><td>1-7 (1=周日)</td><td>1-7 (1=周日)</td></tr><tr><td>L, W, #字符</td><td>不支持</td><td>支持</td><td>支持</td></tr></tbody></table><h3 id="最佳实践建议" tabindex="-1"><strong>最佳实践建议</strong> <a class="header-anchor" href="#最佳实践建议" aria-label="Permalink to &quot;**最佳实践建议**&quot;">​</a></h3><ol><li><p><strong>明确环境</strong>：确认使用的是标准Cron还是Quartz Cron</p></li><li><p><strong>避免秒级调度</strong>：除非必要，避免<code>*/1 * * * * ?</code>这样的秒级任务</p></li><li><p><strong>处理闰年</strong>：<code>0 0 29 2 ?</code> 只在闰年执行</p></li><li><p><strong>时区问题</strong>：Cron使用系统时区，分布式系统要注意时区统一</p></li><li><p><strong>日志记录</strong>：重要的定时任务要记录开始和结束时间</p></li><li><p><strong>避免重叠</strong>：长时间任务要考虑是否允许重叠执行</p></li></ol><h3 id="性能考虑" tabindex="-1"><strong>性能考虑</strong> <a class="header-anchor" href="#性能考虑" aria-label="Permalink to &quot;**性能考虑**&quot;">​</a></h3><div class="language-cron vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cron</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 不推荐：每秒执行（对系统压力大）</span></span>
<span class="line"><span>* * * * * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 推荐：至少间隔5秒以上</span></span>
<span class="line"><span>*/5 * * * * ?</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 推荐：非高峰时段执行</span></span>
<span class="line"><span>0 0 2 * * ?    # 凌晨2点</span></span>
<span class="line"><span>0 30 1 * * ?   # 凌晨1:30</span></span></code></pre></div><h2 id="九、快速参考卡" tabindex="-1">九、快速参考卡 <a class="header-anchor" href="#九、快速参考卡" aria-label="Permalink to &quot;九、快速参考卡&quot;">​</a></h2><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌───────────── 秒 (0-59) [可选]</span></span>
<span class="line"><span>│ ┌─────────── 分 (0-59)</span></span>
<span class="line"><span>│ │ ┌───────── 时 (0-23)</span></span>
<span class="line"><span>│ │ │ ┌─────── 日 (1-31)</span></span>
<span class="line"><span>│ │ │ │ ┌───── 月 (1-12或JAN-DEC)</span></span>
<span class="line"><span>│ │ │ │ │ ┌─── 周 (1-7或SUN-SAT, 1=周日)</span></span>
<span class="line"><span>│ │ │ │ │ │</span></span>
<span class="line"><span>* * * * * *   [年(可选)]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>特殊字符：</span></span>
<span class="line"><span>* 所有值          ? 不指定（日/周互斥）</span></span>
<span class="line"><span>, 多个值          - 范围</span></span>
<span class="line"><span>/ 步长            L 最后（日/周）</span></span>
<span class="line"><span>W 工作日          # 第N个星期几</span></span></code></pre></div>`,61)]))}const g=a(p,[["render",l]]);export{k as __pageData,g as default};

import{_ as a,c as e,o as l,a0 as t}from"./chunks/framework.zS86-xgI.js";const i="/note-operator/operations/simulate/virtualBox/019.png",n="/note-operator/operations/simulate/virtualBox/020.png",r="/note-operator/operations/simulate/virtualBox/021.png",s="/note-operator/operations/simulate/virtualBox/022.png",p="/note-operator/operations/simulate/virtualBox/023.png",c="/note-operator/operations/simulate/virtualBox/024.png",d="/note-operator/operations/simulate/virtualBox/025.png",u="/note-operator/operations/simulate/virtualBox/026.png",g="/note-operator/operations/simulate/virtualBox/027.png",m="/note-operator/operations/simulate/virtualBox/028.png",_="/note-operator/operations/simulate/virtualBox/029.png",h="/note-operator/operations/simulate/virtualBox/030.png",x="/note-operator/operations/simulate/virtualBox/031.png",y="/note-operator/operations/simulate/virtualBox/032.png",k=JSON.parse('{"title":"三、双网卡配置：实现“外网访问+主机互通”","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/operations/simulate/virtualbox/03.md","filePath":"markdown/operations/simulate/virtualbox/03.md"}'),b={name:"markdown/operations/simulate/virtualbox/03.md"};function f(v,o,O,P,B,T){return l(),e("div",null,o[0]||(o[0]=[t('<h1 id="三、双网卡配置-实现-外网访问-主机互通" tabindex="-1">三、双网卡配置：实现“外网访问+主机互通” <a class="header-anchor" href="#三、双网卡配置-实现-外网访问-主机互通" aria-label="Permalink to &quot;三、双网卡配置：实现“外网访问+主机互通”&quot;">​</a></h1><p>默认情况下，虚拟机未配置网络，无法上外网也无法与物理机通信。需配置<strong>NAT网卡（上外网）</strong> 和<strong>Host-Only网卡（主机与虚拟机互通）</strong> ，两步实现网络打通。</p><h2 id="_3-1-第一步-在virtualbox创建网络环境" tabindex="-1">3.1 第一步：在VirtualBox创建网络环境 <a class="header-anchor" href="#_3-1-第一步-在virtualbox创建网络环境" aria-label="Permalink to &quot;3.1 第一步：在VirtualBox创建网络环境&quot;">​</a></h2><p>先在VirtualBox管理器中创建两种网络，供虚拟机使用：</p><h3 id="_3-1-1-创建host-only网络-主机与虚拟机互通" tabindex="-1">3.1.1 创建Host-Only网络（主机与虚拟机互通） <a class="header-anchor" href="#_3-1-1-创建host-only网络-主机与虚拟机互通" aria-label="Permalink to &quot;3.1.1 创建Host-Only网络（主机与虚拟机互通）&quot;">​</a></h3><ol><li><p>关闭<code>centos7</code>虚拟机（配置网卡需关机），回到VirtualBox管理器；</p></li><li><p>点击“管理”→“工具”→“网络管理器”，切换到“仅主机(Host-Only)网络”标签；</p><p><img src="'+i+'" alt="" data-fancybox="gallery"></p></li><li><p>点击“创建”，生成新的Host-Only网络（默认名<code>VirtualBox Host-Only Ethernet Adapter</code>）；</p><p><img src="'+n+'" alt="" data-fancybox="gallery"></p></li><li><p>点击“属性”，配置参数：</p><ul><li>IPv4地址：默认<code>192.168.56.1</code>（物理机在该网络的IP）；</li><li>子网掩码：<code>255.255.255.0</code>；</li><li>地址范围：最小<code>192.168.56.101</code>，最大<code>192.168.56.254</code>（虚拟机IP需在该范围内）；</li><li>点击“应用”保存。</li></ul><p><img src="'+r+'" alt="" data-fancybox="gallery"></p></li></ol><h3 id="_3-1-2-创建nat网络-虚拟机上外网" tabindex="-1">3.1.2 创建NAT网络（虚拟机上外网） <a class="header-anchor" href="#_3-1-2-创建nat网络-虚拟机上外网" aria-label="Permalink to &quot;3.1.2 创建NAT网络（虚拟机上外网）&quot;">​</a></h3><ol><li><p>在“网络”界面切换到“NAT网络”标签；</p></li><li><p>点击“创建”，生成新的NAT网络（默认名<code>NatNetwork</code>）；</p></li><li><p>点击“属性”，配置参数：</p><ul><li>IPv4网络：<code>10.0.2.0/24</code>（子网掩码<code>255.255.255.0</code>）；</li><li>启用DHCP：勾选“DHCP服务器”（虚拟机可自动获取外网IP）；</li><li>点击“应用”保存。</li></ul><p><img src="'+s+'" alt="" data-fancybox="gallery"></p></li></ol><h2 id="_3-2-第二步-为虚拟机添加双网卡" tabindex="-1">3.2 第二步：为虚拟机添加双网卡 <a class="header-anchor" href="#_3-2-第二步-为虚拟机添加双网卡" aria-label="Permalink to &quot;3.2 第二步：为虚拟机添加双网卡&quot;">​</a></h2><ol><li><p>选中<code>node1</code>虚拟机，点击“设置-网络”；</p></li><li><p><strong>添加NAT网卡（网卡1）</strong> ：</p><ul><li>勾选“启用网络连接”；</li><li>连接方式：选择“网络地址转换(NAT)”；</li><li>名称：选择刚才创建的<code>NatNetwork</code>；</li><li>点击“确定”暂存。</li></ul><p><img src="'+p+'" alt="" data-fancybox="gallery"></p></li><li><p><strong>添加Host-Only网卡（网卡2）</strong> ：</p><ul><li>点击“网卡2”标签，勾选“启用网络连接”；</li><li>连接方式：选择“仅主机(Host-Only)网络”；</li><li>名称：选择刚才创建的<code>VirtualBox Host-Only Ethernet Adapter</code>；</li><li>点击“确定”保存配置。</li></ul><p><img src="'+c+'" alt="" data-fancybox="gallery"></p></li></ol><h2 id="_3-3-第三步-配置虚拟机内网卡文件" tabindex="-1">3.3 第三步：配置虚拟机内网卡文件 <a class="header-anchor" href="#_3-3-第三步-配置虚拟机内网卡文件" aria-label="Permalink to &quot;3.3 第三步：配置虚拟机内网卡文件&quot;">​</a></h2><p>启动<code>node1</code>虚拟机，用root登录（<code>[root@localhost ~]#</code>），通过命令行配置网卡参数：</p><h3 id="_3-3-1-查看网卡名称" tabindex="-1">3.3.1 查看网卡名称 <a class="header-anchor" href="#_3-3-1-查看网卡名称" aria-label="Permalink to &quot;3.3.1 查看网卡名称&quot;">​</a></h3><p>输入命令<code>ip addr</code>，查看系统识别的网卡：</p><ul><li>通常<code>enp0s3</code>对应NAT网卡（第一张网卡）；</li><li><code>enp0s8</code>对应Host-Only网卡（第二张网卡）（若未显示，重启虚拟机即可识别）。</li></ul><p><img src="'+d+'" alt="" data-fancybox="gallery"></p><h3 id="_3-3-2-配置nat网卡-enp0s3" tabindex="-1">3.3.2 配置NAT网卡（enp0s3） <a class="header-anchor" href="#_3-3-2-配置nat网卡-enp0s3" aria-label="Permalink to &quot;3.3.2 配置NAT网卡（enp0s3）&quot;">​</a></h3><p>NAT网卡用DHCP自动获取IP，只需设置“开机加载”：</p><ol><li><p>进入网络配置文件目录：<code>cd /etc/sysconfig/network-scripts</code>；</p></li><li><p>编辑enp0s3配置文件：<code>vi ifcfg-enp0s3</code>（vi是Linux默认编辑器）；</p><p><img src="'+u+'" alt="" data-fancybox="gallery"></p></li><li><p>进入编辑模式：按<code>i</code>键，找到<code>ONBOOT=no</code>，修改为<code>ONBOOT=yes</code>（作用：开机自动加载该网卡）；</p><p><img src="'+g+'" alt="" data-fancybox="gallery"></p></li><li><p>保存退出：按<code>ESC</code>键，输入<code>:wq</code>（冒号+wq，意为“写入并退出”），按回车。</p></li></ol><h3 id="_3-3-3-配置host-only网卡-enp0s8" tabindex="-1">3.3.3 配置Host-Only网卡（enp0s8） <a class="header-anchor" href="#_3-3-3-配置host-only网卡-enp0s8" aria-label="Permalink to &quot;3.3.3 配置Host-Only网卡（enp0s8）&quot;">​</a></h3><p>Host-Only网卡需用<strong>静态IP</strong>（便于主机固定访问），步骤如下：</p><ol><li><p>复制enp0s3的配置文件，生成enp0s8的配置：<code>cp ifcfg-enp0s3 ifcfg-enp0s8</code>；</p></li><li><p>生成新UUID（避免与enp0s3冲突）：<code>uuidgen ifcfg-enp0s8</code>，复制输出的UUID（如<code>6fa10f9d-1a99-47b7-8be4-a2e6e6c2c5db</code>）；</p><p><img src="'+m+'" alt="" data-fancybox="gallery"></p></li><li><p>编辑enp0s8配置文件：<code>vi ifcfg-enp0s8</code>，按<code>i</code>进入编辑模式，修改以下参数：</p><ul><li><code>BOOTPROTO=dhcp</code> → <code>BOOTPROTO=static</code>（静态IP）；</li><li><code>NAME=enp0s3</code> → <code>NAME=enp0s8</code>（网卡名匹配）；</li><li><code>DEVICE=enp0s3</code> → <code>DEVICE=enp0s8</code>（设备名匹配）；</li><li><code>UUID=xxx</code> → 替换为刚才复制的新UUID；</li></ul><p><img src="'+_+`" alt="" data-fancybox="gallery"></p><ul><li><p>在文件末尾新增3行（IP需在Host-Only地址范围内，如<code>192.168.56.120</code>）：</p><div class="language-plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>IPADDR=192.168.56.120</span></span>
<span class="line"><span>NETMASK=255.255.255.0</span></span>
<span class="line"><span>GATEWAY=192.168.56.1</span></span></code></pre></div></li></ul></li><li><p>保存退出：按<code>ESC</code>，输入<code>:wq</code>回车。</p></li></ol><h2 id="_3-4-第四步-重启网络并测试连通性" tabindex="-1">3.4 第四步：重启网络并测试连通性 <a class="header-anchor" href="#_3-4-第四步-重启网络并测试连通性" aria-label="Permalink to &quot;3.4 第四步：重启网络并测试连通性&quot;">​</a></h2><ol><li><p>重启网络服务：<code>service network restart</code>，显示<code>[ OK ]</code>表示重启成功；</p><p><img src="`+h+'" alt="" data-fancybox="gallery"></p></li><li><p><strong>测试外网连通性</strong>： ping百度4次（避免无限ping）：<code>ping www.baidu.com -c 4</code>；</p><ul><li>若显示“4 packets transmitted, 4 received”（4个包发送，4个接收），说明NAT网卡生效，虚拟机可上外网；</li></ul><p><img src="'+x+'" alt="" data-fancybox="gallery"></p></li><li><p><strong>测试主机与虚拟机互通</strong>：</p><ul><li>物理机打开终端（Windows用cmd，macOS/Linux用终端），ping虚拟机的Host-Only IP：<code>ping 192.168.56.120</code>；</li><li>若显示“来自 192.168.56.120 的回复”，说明Host-Only网卡生效，主机与虚拟机可互通。</li></ul><p><img src="'+y+'" alt="" data-fancybox="gallery"></p></li></ol>',24)]))}const q=a(b,[["render",f]]);export{k as __pageData,q as default};

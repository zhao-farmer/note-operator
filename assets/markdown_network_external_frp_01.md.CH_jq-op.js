import{_ as i,c as a,o as n,a0 as p}from"./chunks/framework.zS86-xgI.js";const t="/note-operator/network/external/frp/001.png",l="/note-operator/network/external/frp/003.png",e="/note-operator/network/external/frp/004.png",h="/note-operator/network/external/frp/005.png",k="/note-operator/network/external/frp/006.png",r="/note-operator/network/external/frp/007.png",d="/note-operator/network/external/frp/002.png",o="/note-operator/network/external/frp/008.png",g="/note-operator/assets/009.COzuQZf2.png",c="/note-operator/assets/010.BVTOn-Ik.png",C=JSON.parse('{"title":"一、快速实现内网穿透","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/network/external/frp/01.md","filePath":"markdown/network/external/frp/01.md"}'),y={name:"markdown/network/external/frp/01.md"};function E(F,s,u,m,b,f){return n(),a("div",null,s[0]||(s[0]=[p('<h1 id="一、快速实现内网穿透" tabindex="-1">一、快速实现内网穿透 <a class="header-anchor" href="#一、快速实现内网穿透" aria-label="Permalink to &quot;一、快速实现内网穿透&quot;">​</a></h1><ol><li><p>通过FRP 实现两个常用功能</p><ul><li>将本地ip端口映射到公网可访问:用于测试项目</li><li>公网可访间本机文件:用作文件共享的简单途径</li></ul></li><li><p>地址与文档</p><ul><li>github地址：<a href="https://github.com/fatedier/frp" target="_blank" rel="noreferrer">https://github.com/fatedier/frp</a></li><li>官方文档地址：<a href="https://gofrp.org/" target="_blank" rel="noreferrer">https://gofrp.org/</a></li><li>软件下载地址：<a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noreferrer">https://github.com/fatedier/frp/releases</a></li></ul></li><li><p>配置主要分两部分：</p><ul><li>frps:服务端，布局在具有公网的IP的服务器。</li><li>frpc:客户端，布局在内网设备。</li></ul></li></ol><h3 id="_1-1-安装linux服务端" tabindex="-1">1.1 安装linux服务端 <a class="header-anchor" href="#_1-1-安装linux服务端" aria-label="Permalink to &quot;1.1 安装linux服务端&quot;">​</a></h3><ol><li><p>下载linux服务端</p><p><img src="'+t+'" alt="" data-fancybox="gallery"></p></li><li><p>上传到服务器上</p><p><img src="'+l+`" alt="" data-fancybox="gallery"></p></li><li><p>处理文件</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 解压文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frp_0.65.0_linux_amd64.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重命名文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frp_0.65.0_linux_amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/frp-server</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 删除客户端文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/frp-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./frpc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span></code></pre></div></li><li><p>修改配置文件</p><ul><li><p>修改文件命令</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frps.toml</span></span></code></pre></div></li><li><p>文件配置</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bindPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 7000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">webServer.addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.0.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">webServer.port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 7500</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">webServer.user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yourname&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">webServer.password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yourpw&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">auth.method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;token&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">auth.token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;thisisatoken&quot;</span></span></code></pre></div></li></ul></li><li><p>启动服务端</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./frps</span></span></code></pre></div><p><img src="`+e+`" alt="" data-fancybox="gallery"></p></li><li><p>利用systemd启动后台进程挂载</p><ol><li><p>创建service文件</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/systemd/system/frps-server.service</span></span></code></pre></div></li><li><p>frps-server.service内容:</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[Unit]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = frp server</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">After</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = network.target syslog.target</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Wants</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = network.target</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[Service]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=simple</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ExecStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = /usr/frp-server/frps -c /usr/frp-server/frps.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ExecStop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=/bin/kill $MAINPID</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=always</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RestartSec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[Install]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WantedBy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = multi-user.target</span></span></code></pre></div></li><li><p>启动</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 刷新服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frps-server.service</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frps-server.service</span></span></code></pre></div><p><img src="`+h+'" alt="" data-fancybox="gallery"></p></li></ol></li><li><p>开通7500端口与7000端口</p><p><img src="'+k+'" alt="" data-fancybox="gallery"></p></li><li><p>远程访问7500端口</p><p><img src="'+r+'" alt="" data-fancybox="gallery"></p></li></ol><h3 id="_1-2-安装win客户端" tabindex="-1">1.2 安装win客户端 <a class="header-anchor" href="#_1-2-安装win客户端" aria-label="Permalink to &quot;1.2 安装win客户端&quot;">​</a></h3><ol><li><p>下载windows客户端</p><p><img src="'+d+`" alt="" data-fancybox="gallery"></p></li><li><p>删除服务端</p></li><li><p>修改客户端配置文件</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 你的云服务器公网ip</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">serverAddr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x.x.x.x&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接到云服务器端口,需要和frps.toml配置文件中端口一致</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">serverPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 7000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">auth.method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;token&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">auth.token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;thisisatoken&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开放端口连接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[[proxies]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test-tcp&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tcp&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">localIP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">localPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 8080</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">remotePort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 6100</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 共享文件访问</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[[proxies]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d_drive&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tcp&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">remotePort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 6001  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 服务器上用于访问的端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[proxies.plugin]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;static_file&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">localPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;D:\\\\&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 要对外暴露的目录</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">stripPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d_drive&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 访问路径名，此处即http://x.x.x.x:6001/d_drive/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">httpUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 用户名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">httpPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;password&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 密码</span></span></code></pre></div></li><li><p>cmd命令启动</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>frpc.exe -c frpc.toml</span></span></code></pre></div><p><img src="`+o+'" alt="" data-fancybox="gallery"></p></li><li><p>本地配置文件有两个远程，添加服务器端口</p><p><img src="'+g+'" alt="" data-fancybox="gallery"></p></li><li><p>访问的本地文件</p><p><img src="'+c+'" alt="" data-fancybox="gallery"></p></li></ol>',6)]))}const A=i(y,[["render",E]]);export{C as __pageData,A as default};

import{P as o}from"./chunks/prompt-template.D94DQ2g1.js";import{_ as d,c as n,o as s,a0 as r,j as e,G as l,a as t,w as i}from"./chunks/framework.zS86-xgI.js";const p="/note-operator/aitool/picture/sd-webui/study/086.png",c="/note-operator/aitool/picture/sd-webui/study/087.png",u="/note-operator/aitool/picture/sd-webui/study/088.png",g="/note-operator/aitool/picture/sd-webui/study/089.png",v="/note-operator/aitool/picture/sd-webui/study/090.png",b="/note-operator/aitool/picture/sd-webui/study/091.png",m="/note-operator/aitool/picture/sd-webui/study/092.png",y="/note-operator/aitool/picture/sd-webui/study/093.png",_="/note-operator/aitool/picture/sd-webui/study/094.png",h="/note-operator/aitool/picture/sd-webui/study/095.png",f="/note-operator/aitool/picture/sd-webui/study/096.png",w="/note-operator/aitool/picture/sd-webui/study/097.png",k="/note-operator/aitool/picture/sd-webui/study/098.png",x="/note-operator/aitool/picture/sd-webui/study/099.png",q="/note-operator/aitool/picture/sd-webui/study/100.png",S="/note-operator/aitool/picture/sd-webui/study/101.png",P="/note-operator/aitool/picture/sd-webui/study/102.png",T="/note-operator/aitool/picture/sd-webui/study/103.png",A="/note-operator/aitool/picture/sd-webui/study/104.png",E="/note-operator/aitool/picture/sd-webui/study/105.png",D="/note-operator/aitool/picture/sd-webui/study/106.png",L="/note-operator/aitool/picture/sd-webui/study/107.png",R="/note-operator/aitool/picture/sd-webui/study/108.png",N="/note-operator/aitool/picture/sd-webui/study/109.png",V="/note-operator/aitool/picture/sd-webui/study/110.png",I="/note-operator/aitool/picture/sd-webui/study/111.png",H=JSON.parse('{"title":"六、模型原理解析","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/aitool/picture/sd-webui/study/06.md","filePath":"markdown/aitool/picture/sd-webui/study/06.md"}'),C={name:"markdown/aitool/picture/sd-webui/study/06.md"},O=Object.assign(C,{setup(W){return(F,a)=>(s(),n("div",null,[a[16]||(a[16]=r('<h1 id="六、模型原理解析" tabindex="-1" data-v-c13e63e6>六、模型原理解析 <a class="header-anchor" href="#六、模型原理解析" aria-label="Permalink to &quot;六、模型原理解析&quot;" data-v-c13e63e6>​</a></h1><h2 id="_6-1-文本嵌入-embeddings" tabindex="-1" data-v-c13e63e6>6.1 文本嵌入（Embeddings） <a class="header-anchor" href="#_6-1-文本嵌入-embeddings" aria-label="Permalink to &quot;6.1 文本嵌入（Embeddings）&quot;" data-v-c13e63e6>​</a></h2><h3 id="_6-1-1-词嵌入模型的基本概念" tabindex="-1" data-v-c13e63e6>6.1.1 词嵌入模型的基本概念 <a class="header-anchor" href="#_6-1-1-词嵌入模型的基本概念" aria-label="Permalink to &quot;6.1.1 词嵌入模型的基本概念&quot;" data-v-c13e63e6>​</a></h3><ol data-v-c13e63e6><li data-v-c13e63e6><p data-v-c13e63e6>Embedding是什么？</p><p data-v-c13e63e6>Embedding 又名 textual inversion 中文名：“嵌入或文本反转”。</p><p data-v-c13e63e6>在计算机科学中，Embedding是将高维数据映射到低维空间的过程。</p><p data-v-c13e63e6>在图像处理中，Embedding通常用于将图像转换为向量表示，以便进行机器学习和深度学习任务。</p><p data-v-c13e63e6>在使用stable diffusion进行绘画时，Embedding可以用于将输入的图像转换为向量表示，以便于算法对其进行处理和生成新的图像。这种技术可以使算法更加高效地处理图像数据，并提高生成图像的质量和准确性。</p></li><li data-v-c13e63e6><p data-v-c13e63e6>Embedding有什么作用？</p><p data-v-c13e63e6>通俗来讲，Embedding 的作用就是对提示词进行打包。</p><p data-v-c13e63e6>如果你有做 UI 的经验，那么应该知道组件的概念。</p><p data-v-c13e63e6>在 Stable Diffusion 中，Embedding 技术就可以被理解为一种组件，它可以将输入数据转换成向量表示，方便模型进行处理和生成。</p><p data-v-c13e63e6>在日常使用中，Embedding 技术通常用于控制人物的动作和特征（处理多余的手），或者生成特定的画风（生成特殊动漫人物如：dva、猎空…）。</p></li><li data-v-c13e63e6><p data-v-c13e63e6>Embedding 的特点</p><p data-v-c13e63e6>相比于其他模型来说（如 LORA），Embedding 文件的大小只有几十 KB。</p><p data-v-c13e63e6>除了还原度对比 LORA 差一些外，在存储和使用上却更方便。</p></li></ol><p data-v-c13e63e6>总而言之：</p><p data-v-c13e63e6>Embedding 技术将输入数据转换为向量表示，为模型的处理和生成提供了便利。</p><p data-v-c13e63e6>通过使用 Embedding，我们可以更加轻松地生成符合预期的样本，而不需要手动输入大量的描述词汇。</p><h3 id="_6-1-2-使用embeddings描绘对象或概念" tabindex="-1" data-v-c13e63e6>6.1.2 使用Embeddings描绘对象或概念 <a class="header-anchor" href="#_6-1-2-使用embeddings描绘对象或概念" aria-label="Permalink to &quot;6.1.2 使用Embeddings描绘对象或概念&quot;" data-v-c13e63e6>​</a></h3><ol data-v-c13e63e6><li data-v-c13e63e6><p data-v-c13e63e6>下载</p><ul data-v-c13e63e6><li data-v-c13e63e6>c站国外,需要vpn</li></ul><p data-v-c13e63e6><img src="'+p+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><p data-v-c13e63e6><img src="'+c+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ul data-v-c13e63e6><li data-v-c13e63e6>国内下载</li></ul><p data-v-c13e63e6><img src="'+u+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><p data-v-c13e63e6><img src="'+g+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p></li><li data-v-c13e63e6><p data-v-c13e63e6>放入文件夹</p></li></ol><p data-v-c13e63e6><img src="'+v+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><p data-v-c13e63e6>重新启动sd，在嵌入式哪里查看是否含有此模型</p><p data-v-c13e63e6><img src="'+b+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ol start="3" data-v-c13e63e6><li data-v-c13e63e6>使用方式</li></ol><p data-v-c13e63e6>将提示词与embeddings文件夹下内容保持一致，可以点击或者重命名复制</p>',14)),e("ul",null,[e("li",null,[a[2]||(a[2]=e("p",null,"生成原图",-1)),a[3]||(a[3]=e("ul",null,[e("li",null,[t("模型: "),e("code",null,"darkSushiMixMix_225D.safetensors")]),e("li",null,"提示词:")],-1)),l(o,null,{content:i(()=>a[0]||(a[0]=[t(" SFW,masterpiece,best quality,1girl,brown hair,brown eyes,smile,standing,dynamic pose,outdoors,city background, ")])),_:1}),a[4]||(a[4]=e("ul",null,[e("li",null,"反向词：")],-1)),l(o,null,{content:i(()=>a[1]||(a[1]=[t(" NSFW,(worst quality:2),(low quality:2),(normal quality:2),lowres,normal quality,((monochrome)),((grayscale)),skin spots,acnes,skin blemishes,age spot,(ugly:1.331),(duplicate:1.331),(morbid:1.21),(mutilated:1.21),(tranny:1.331),mutated hands,(poorly drawn hands:1.5),blurry,(bad anatomy:1.21),(bad proportions:1.331),extra limbs,(disfigured:1.331), (missing arms:1.331),(extra legs:1.331),(fused fingers:1.61051),(too many fingers:1.61051),(unclear eyes:1.331),lowers,bad hands,missing fingers,extra digit,bad hands,missing fingers,(((extra arms and legs))), ")])),_:1}),a[5]||(a[5]=e("ul",null,[e("li",null,"生成图片")],-1)),a[6]||(a[6]=e("p",null,[e("img",{src:m,alt:"","data-fancybox":"gallery"})],-1))])]),a[17]||(a[17]=r('<ol start="2" data-v-c13e63e6><li data-v-c13e63e6>加入Enbedding提示词</li></ol><ul data-v-c13e63e6><li data-v-c13e63e6><p data-v-c13e63e6>方式1：提示词中直接输入</p></li><li data-v-c13e63e6><p data-v-c13e63e6>方式2：点击下方列表</p></li></ul><p data-v-c13e63e6><img src="'+y+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><p data-v-c13e63e6><strong data-v-c13e63e6>生成图片</strong></p><p data-v-c13e63e6><img src="'+_+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ol start="3" data-v-c13e63e6><li data-v-c13e63e6>反推原本动漫人物的提示词，进行进一步优化</li></ol><ul data-v-c13e63e6><li data-v-c13e63e6>获取提示词</li></ul><p data-v-c13e63e6><img src="'+h+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p>',8)),e("ul",null,[e("li",null,[a[9]||(a[9]=e("p",null,"将反推中的部分提示词加入进来",-1)),a[10]||(a[10]=e("ul",null,[e("li",null,"旧词")],-1)),l(o,null,{content:i(()=>a[7]||(a[7]=[t(" SFW,masterpiece,best quality,1girl,brown hair,brown eyes,smile,standing,dynamic pose,outdoors,city background,corneo_dva, ")])),_:1}),a[11]||(a[11]=e("ul",null,[e("li",null,"新词")],-1)),l(o,null,{content:i(()=>a[8]||(a[8]=[t(" bodysuit,facial_mark,headphones,long_hair,whisker_markings,solo,bunny_print,animal_print,white_gloves,pilot_suit,shoulder_pads,facepaint,brown_hair,ribbed_bodysuit,bangs,gloves,swept_bangs,clothes_writing,brown_eyes,breasts,high_collar,white_footwear,turtleneck,medium_breasts,full_body,thighhighs,bracer,skin_tight,thigh_strap,armor,boots,standing, ")])),_:1})]),a[12]||(a[12]=e("li",null,[e("p",null,"生成图片")],-1))]),a[18]||(a[18]=e("p",null,[e("img",{src:f,alt:"","data-fancybox":"gallery"})],-1)),a[19]||(a[19]=e("h3",{id:"_6-1-3-复杂应用-生成三视图",tabindex:"-1"},[t("6.1.3 复杂应用-生成三视图 "),e("a",{class:"header-anchor",href:"#_6-1-3-复杂应用-生成三视图","aria-label":'Permalink to "6.1.3 复杂应用-生成三视图"'},"​")],-1)),a[20]||(a[20]=e("ul",null,[e("li",null,"提示词:")],-1)),l(o,null,{content:i(()=>a[13]||(a[13]=[e("span",null,"A character turnaround of a (corneo_dva) wearing blue mecha bodysuit,(CharTurnerV2:1.2),",-1),e("span",null,"A(multiple views of the same character with the same clothes:1.2)((character sheet)),(model sheet),((turnaround)),(reference sheet),white background,simple background,character concept,full body,",-1),e("span",null,"ASFW,masterpiece,best quality, bodysuit,facial_mark,headphones,long_hair,whisker_markings,solo,bunny_print,animal_print,white_gloves,pilot_suit,shoulder_pads,facepaint,brown_hair,ribbed_bodysuit,bangs,gloves,swept_bangs,clothes_writing,brown_eyes,breasts,high_collar,white_footwear,turtleneck,medium_breasts,full_body,thighhighs,bracer,skin_tight,thigh_strap,armor,boots,standing,",-1)])),_:1}),a[21]||(a[21]=e("ul",null,[e("li",null,"反向提示词")],-1)),l(o,null,{content:i(()=>a[14]||(a[14]=[t(" NSFW,(worst quality:2),(low quality:2),(normal quality:2),lowres,normal quality,((monochrome)),((grayscale)),skin spots,acnes,skin blemishes,age spot,(ugly:1.331),(duplicate:1.331),(morbid:1.21),(mutilated:1.21),(tranny:1.331),mutated hands,(poorly drawn hands:1.5),blurry,(bad anatomy:1.21),(bad proportions:1.331),extra limbs,(disfigured:1.331), (missing arms:1.331),(extra legs:1.331),(fused fingers:1.61051),(too many fingers:1.61051),(unclear eyes:1.331),lowers,bad hands,missing fingers,extra digit,bad hands,missing fingers,(((extra arms and legs))), ")])),_:1}),a[22]||(a[22]=r('<ul data-v-c13e63e6><li data-v-c13e63e6>高分辨率修复</li></ul><p data-v-c13e63e6><img src="'+w+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ul data-v-c13e63e6><li data-v-c13e63e6>提示词的解释</li></ul><p data-v-c13e63e6><img src="'+k+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><p data-v-c13e63e6><strong data-v-c13e63e6>生成图片</strong></p><p data-v-c13e63e6><img src="'+x+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><h3 id="_6-1-4-复杂应用-消除错手" tabindex="-1" data-v-c13e63e6>6.1.4 复杂应用-消除错手 <a class="header-anchor" href="#_6-1-4-复杂应用-消除错手" aria-label="Permalink to &quot;6.1.4 复杂应用-消除错手&quot;" data-v-c13e63e6>​</a></h3><p data-v-c13e63e6>利用负面词嵌入消除错手</p><p data-v-c13e63e6>利用自带的三个插件解决一些图像的负面现象</p><p data-v-c13e63e6><img src="'+q+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ul data-v-c13e63e6><li data-v-c13e63e6>提示词</li></ul>',11)),l(o,null,{content:i(()=>a[15]||(a[15]=[t(" best quality,masterpiece,1girl,solo,realistic,light blue hair,pink eyes,side ponytail,serafuku,pleated skirt,detailed hands and fingers, ")])),_:1}),a[23]||(a[23]=r('<ul data-v-c13e63e6><li data-v-c13e63e6>生成图片</li></ul><p data-v-c13e63e6><img src="'+S+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ul data-v-c13e63e6><li data-v-c13e63e6>负面词中加入: <code data-v-c13e63e6>EasyNegativeV2</code></li></ul><p data-v-c13e63e6><img src="'+P+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><h2 id="_6-2-低秩模型-lora" tabindex="-1" data-v-c13e63e6>6.2 低秩模型（Lora） <a class="header-anchor" href="#_6-2-低秩模型-lora" aria-label="Permalink to &quot;6.2 低秩模型（Lora）&quot;" data-v-c13e63e6>​</a></h2><h3 id="_6-2-1-低秩模型的基本概念" tabindex="-1" data-v-c13e63e6>6.2.1 低秩模型的基本概念 <a class="header-anchor" href="#_6-2-1-低秩模型的基本概念" aria-label="Permalink to &quot;6.2.1 低秩模型的基本概念&quot;" data-v-c13e63e6>​</a></h3><p data-v-c13e63e6>lora的作用在于帮助你向AI传递，描述某一个特征准确，主体清晰的对象</p><p data-v-c13e63e6>LoRA的全称是LoRA: <code data-v-c13e63e6>Low-Rank Adaptation of Large Language Models</code>，可以理解为<code data-v-c13e63e6>stable diffusion(SD)</code>模型的一种插件，和hyper-network，controlNet一样，都是在不修改SD模型的前提下，利用少量数据训练出一种画风/IP/人物，实现定制化需求，所需的训练资源比训练SD模要小很多，非常适合社区使用者和个人开发者。LoRA最初应用于NLP领域，用于微调GPT-3等模型（也就是ChatGPT的前生）。由于GPT参数量超过千亿，训练成本太高，因此LoRA采用了一个办法，仅训练低秩矩阵（low rank matrics），使用时将LoRA模型的参数注入（inject）SD模型，从而改变SD模型的生成风格，或者为SD模型添加新的人物/IP。用数据公式表达如下，其中 <code data-v-c13e63e6>0</code> 是初始SD模型的参数(Weights)，为低秩矩阵也就是LoRA模型的参数，代表被LORA模型影响后的最终SD模型参数。整个过程是一个简单的线性关系，可以认为是原SD模型叠加LORA模型后，得到一个全新效果的模型。</p><h3 id="_6-2-2-lora的作用与应用简析" tabindex="-1" data-v-c13e63e6>6.2.2 lora的作用与应用简析 <a class="header-anchor" href="#_6-2-2-lora的作用与应用简析" aria-label="Permalink to &quot;6.2.2 lora的作用与应用简析&quot;" data-v-c13e63e6>​</a></h3><ol data-v-c13e63e6><li data-v-c13e63e6>下载模型</li></ol><p data-v-c13e63e6>c站下载</p><p data-v-c13e63e6><img src="'+T+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><p data-v-c13e63e6>国内下载</p><p data-v-c13e63e6><img src="'+A+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ol start="2" data-v-c13e63e6><li data-v-c13e63e6>放入文件目录下</li></ol><p data-v-c13e63e6><img src="'+E+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ol start="3" data-v-c13e63e6><li data-v-c13e63e6>使用lora与提示词</li></ol><p data-v-c13e63e6><img src="'+D+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><p data-v-c13e63e6><strong data-v-c13e63e6>生成图片</strong></p><p data-v-c13e63e6><img src="'+L+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><blockquote data-v-c13e63e6><p data-v-c13e63e6>注意：</p><ul data-v-c13e63e6><li data-v-c13e63e6>公式：<code data-v-c13e63e6>&lt;lora:模型名称:权重&gt;</code> 权重一般再0.6-0.8之间</li><li data-v-c13e63e6>提示词：增加lora对生成图的影响，一般有提示了都需要加上</li></ul></blockquote><h2 id="_6-3-超网络-hypernetwork" tabindex="-1" data-v-c13e63e6>6.3 超网络（Hypernetwork） <a class="header-anchor" href="#_6-3-超网络-hypernetwork" aria-label="Permalink to &quot;6.3 超网络（Hypernetwork）&quot;" data-v-c13e63e6>​</a></h2><h3 id="_6-3-1-超网络的基本概念" tabindex="-1" data-v-c13e63e6>6.3.1 超网络的基本概念 <a class="header-anchor" href="#_6-3-1-超网络的基本概念" aria-label="Permalink to &quot;6.3.1 超网络的基本概念&quot;" data-v-c13e63e6>​</a></h3><ul data-v-c13e63e6><li data-v-c13e63e6>基本概念</li></ul><p data-v-c13e63e6>hypernetwork，中文名为超网络，是一种神经网络架构,它允许动态生成神经网络的参数(权重)。简而言之,hypernetwork可以生成其他神经网络。</p><p data-v-c13e63e6>在Stable Diffusion中,hypernetwork被用于动态生成分类器的参数，为Stable Diffusion模型添加了随机性,减少了参数量,并能够引入side information来辅助特定任务,这使得该模型具有更强的通用性和概括能力。</p><ul data-v-c13e63e6><li data-v-c13e63e6>作用</li></ul><p data-v-c13e63e6>功能和embedding、lora类似，都是对Stable Diffusion生成的图片进行针对性地调整，hypernetwork的应用领域较窄，主要是训练画风，训练难度很大，未来很有可能被后出现的lora所替代，新手可以将hypernetwork理解为低配版的lora。</p><p data-v-c13e63e6>hypernetwork最重要也是实现最好的功能是对画面风格的转换，也就是切换不同的画风。</p><h3 id="_6-3-2-hyoernetwork的作用与应用简析" tabindex="-1" data-v-c13e63e6>6.3.2 Hyoernetwork的作用与应用简析 <a class="header-anchor" href="#_6-3-2-hyoernetwork的作用与应用简析" aria-label="Permalink to &quot;6.3.2 Hyoernetwork的作用与应用简析&quot;" data-v-c13e63e6>​</a></h3><ol data-v-c13e63e6><li data-v-c13e63e6>下载</li></ol><p data-v-c13e63e6><img src="'+R+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ol start="2" data-v-c13e63e6><li data-v-c13e63e6>放入指定目录下</li></ol><p data-v-c13e63e6><img src="'+N+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><ol start="3" data-v-c13e63e6><li data-v-c13e63e6>提示词中添加</li></ol><p data-v-c13e63e6><img src="'+V+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p><p data-v-c13e63e6><strong data-v-c13e63e6>生成图片</strong></p><p data-v-c13e63e6><img src="'+I+'" alt="" data-fancybox="gallery" data-v-c13e63e6></p>',38))]))}}),j=d(O,[["__scopeId","data-v-c13e63e6"]]);export{H as __pageData,j as default};

import{_ as s,c as i,o as t,a0 as p}from"./chunks/framework.zS86-xgI.js";const n="/note-operator/data/pgsql/install/001.png",e="/note-operator/data/pgsql/install/002.png",o="/note-operator/data/pgsql/install/003.png",r="/note-operator/data/pgsql/install/004.png",d="/note-operator/data/pgsql/install/005.png",h="/note-operator/data/pgsql/install/006.png",g="/note-operator/data/pgsql/install/007.png",c="/note-operator/data/pgsql/install/008.png",k="/note-operator/data/pgsql/install/009.png",y="/note-operator/data/pgsql/install/010.png",F="/note-operator/data/pgsql/install/011.png",m="/note-operator/data/pgsql/install/012.png",_="/note-operator/data/pgsql/install/013.png",u="/note-operator/data/pgsql/install/014.png",b="/note-operator/data/pgsql/install/015.png",l="/note-operator/data/pgsql/install/016.png",C="/note-operator/data/pgsql/install/017.png",q="/note-operator/data/pgsql/install/018.png",x="/note-operator/data/pgsql/install/019.png",f="/note-operator/data/pgsql/install/020.png",B="/note-operator/data/pgsql/install/021.png",v="/note-operator/data/pgsql/install/022.png",E="/note-operator/data/pgsql/install/023.png",w="/note-operator/data/pgsql/install/024.png",P="/note-operator/data/pgsql/install/025.png",D="/note-operator/data/pgsql/install/030.png",A="/note-operator/data/pgsql/install/031.png",T="/note-operator/data/pgsql/install/032.png",S="/note-operator/data/pgsql/install/033.png",J=JSON.parse('{"title":"一、windows安装pgsql","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/data/pgsql/install/01.md","filePath":"markdown/data/pgsql/install/01.md"}'),N={name:"markdown/data/pgsql/install/01.md"};function I(z,a,$,U,V,L){return t(),i("div",null,a[0]||(a[0]=[p('<h1 id="一、windows安装pgsql" tabindex="-1">一、windows安装pgsql <a class="header-anchor" href="#一、windows安装pgsql" aria-label="Permalink to &quot;一、windows安装pgsql&quot;">​</a></h1><h2 id="_1-1-exe安装" tabindex="-1">1.1 exe安装 <a class="header-anchor" href="#_1-1-exe安装" aria-label="Permalink to &quot;1.1 exe安装&quot;">​</a></h2><ol><li><p>下载</p><p><a href="https://www.postgresql.org/" target="_blank" rel="noreferrer">进入官网</a></p><ul><li>第一步</li></ul><p><img src="'+n+'" alt="" data-fancybox="gallery"></p><ul><li>第二步</li></ul><p><img src="'+e+'" alt="" data-fancybox="gallery"></p><ul><li>第三步</li></ul><p><img src="'+o+'" alt="" data-fancybox="gallery"></p><ul><li>第四步</li></ul><p><img src="'+r+'" alt="" data-fancybox="gallery"></p></li><li><p>安装</p><ul><li>双击安装进行下一步</li></ul><p><img src="'+d+'" alt="" data-fancybox="gallery"></p><ul><li>选择安装路径</li></ul><p><img src="'+h+'" alt="" data-fancybox="gallery"></p><ul><li>选择安装组件</li></ul><p><img src="'+g+'" alt="" data-fancybox="gallery"></p><ul><li>选择数据路径</li></ul><p><img src="'+c+'" alt="" data-fancybox="gallery"></p><ul><li>输入管理员密码</li></ul><p><img src="'+k+'" alt="" data-fancybox="gallery"></p><ul><li>端口号</li></ul><p><img src="'+y+'" alt="" data-fancybox="gallery"></p><ul><li>语言与地区-这里选择默认（2018年贸易战后，就再也没有中文了，当时还在学习使用这个数据库的我日了狗了，因为政治因素导致这门数据库没可能在中国大规模使用）</li></ul><p><img src="'+F+'" alt="" data-fancybox="gallery"></p><ul><li>确认安装</li></ul><p><img src="'+m+'" alt="" data-fancybox="gallery"></p><p><img src="'+_+'" alt="" data-fancybox="gallery"></p><p><img src="'+u+'" alt="" data-fancybox="gallery"></p><p><img src="'+b+`" alt="" data-fancybox="gallery"></p></li><li><p>修改配置文件</p><ul><li>修改对应data目录下的配置文件pg_hba.conf</li></ul><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># IPv4local connections:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">host    all            all            0.0.0.0/0           scram-sha-256</span></span></code></pre></div><ul><li>修改结果</li></ul><p><img src="`+l+'" alt="" data-fancybox="gallery"></p></li><li><p>远程连接</p><p><img src="'+C+'" alt="" data-fancybox="gallery"></p></li></ol><h2 id="_1-2-zip安装" tabindex="-1">1.2 zip安装 <a class="header-anchor" href="#_1-2-zip安装" aria-label="Permalink to &quot;1.2 zip安装&quot;">​</a></h2><ol><li>下载</li></ol><p>网址: <code>https://www.enterprisedb.com/download-postgresql-binaries</code></p><p><img src="'+q+'" alt="" data-fancybox="gallery"></p><ol start="2"><li><p>开始安装</p><ul><li>解压安装包后然后在bin目录同级下新建一个data文件夹，用来存放数据</li></ul><p><img src="'+x+'" alt="" data-fancybox="gallery"></p><ul><li><p>初始化数据库，进入bin目录并执行初始化命令</p><ul><li><p>初始化DB命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initdb.exe</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  F:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ATA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">atabase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gsql17</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UTF-8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --locale=chs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -W</span></span></code></pre></div></li><li><p>命令解释：</p><ul><li>D ：指定数据库簇的存储目录D:\\postgresql-14.4-1\\data</li><li>E ：指定DB的超级用户的用户名postgres –locale：关于区域设置（chinese-simplified-china）</li><li>U ：默认编码格式chs</li><li>W ：为超级用户指定密码的提示</li></ul></li></ul></li><li><p>期间会要你输入新的用户口令，如下图：</p><p><img src="'+f+'" alt="" data-fancybox="gallery"></p></li><li><p>输出成功，如下图</p><p><img src="'+B+'" alt="" data-fancybox="gallery"></p></li><li><p>启动数据库</p><ul><li><p>启动数据库命令</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pg_ctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> F:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ATA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">atabase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gsql17</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logfile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div></li><li><p>运行结果</p><p><img src="'+v+'" alt="" data-fancybox="gallery"></p></li></ul></li></ul></li><li><p>远程连接</p><p><img src="'+E+'" alt="" data-fancybox="gallery"></p></li><li><p>注册为系统服务</p><ul><li>注册PostgreSQL系统服务命令：</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pg_ctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> register</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 服务名</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> F:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ATA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">atabase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gsql17</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ata</span></span></code></pre></div><ul><li>cmd 操作</li></ul><p><img src="'+w+'" alt="" data-fancybox="gallery"></p><ul><li>查看是否成功</li></ul><p><img src="'+P+'" alt="" data-fancybox="gallery"></p></li></ol><h2 id="_1-3-navicate连接问题" tabindex="-1">1.3 navicate连接问题 <a class="header-anchor" href="#_1-3-navicate连接问题" aria-label="Permalink to &quot;1.3 navicate连接问题&quot;">​</a></h2><h3 id="_1-3-1-datlastsysoid-不存在" tabindex="-1">1.3.1 “datlastsysoid” 不存在 <a class="header-anchor" href="#_1-3-1-datlastsysoid-不存在" aria-label="Permalink to &quot;1.3.1 “datlastsysoid” 不存在&quot;">​</a></h3><p><code>Navicat Premium 16 连接 Postgres 报错：字段 “datlastsysoid” 不存在</code></p><ol><li>备份文件libcc.dll</li></ol><p>进入Navicat Premium 安装目录，将libcc.dll备份</p><p><img src="'+D+'" alt="" data-fancybox="gallery"></p><ol start="2"><li>用在线工具hexed.it打开libcc.dll文件</li></ol><p>访问地址：<a href="https://hexed.it/" target="_blank" rel="noreferrer">hexed.it</a></p><ol start="3"><li><p>替换文件</p><ul><li><code>Ctrl + F</code> 搜索 <code>SELECT DISTINCT datlastsysoid</code>,</li><li>将其中的<code>datlastsysoid</code>将其替换为<code>dattablespace</code></li><li><code>dattablespace</code>对应的16进制码为：64 61 74 74 61 62 6C 65 73 70 61 63 65</li></ul><p><img src="'+A+'" alt="" data-fancybox="gallery"></p></li><li><p>另存为libcc.dll文件</p><p>将修改好的文件先另存为libcc.txt，然后再在文件夹中将其改为libcc.dll，放到之前libcc.dll所在的文件位置即可。</p><blockquote><p>注：使用十六进制编辑器修改libcc.dll另存为dll文件格式后，运行navicat可能会报错，因此需要另存为txt，然后再通过修改文件后缀来将文件改成dll格式。</p></blockquote></li><li><p>连接nvvicate</p><p><img src="'+T+'" alt="" data-fancybox="gallery"></p></li></ol><h3 id="_1-3-2-postgresql-内网远程连接失败-乱码" tabindex="-1">1.3.2 PostgreSql 内网远程连接失败，乱码 <a class="header-anchor" href="#_1-3-2-postgresql-内网远程连接失败-乱码" aria-label="Permalink to &quot;1.3.2 PostgreSql 内网远程连接失败，乱码&quot;">​</a></h3><ol><li>连接数据库，错误提示：</li></ol><p><img src="'+S+`" alt="" data-fancybox="gallery"></p><ol start="2"><li>修改对应data目录下的配置文件pg_hba.conf</li></ol><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># IPv4local connections:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">host    all            all            0.0.0.0/0           scram-sha-256</span></span></code></pre></div><ol start="3"><li>修改结果</li></ol><p><img src="`+l+'" alt="" data-fancybox="gallery"></p>',24)]))}const O=s(N,[["render",I]]);export{J as __pageData,O as default};
